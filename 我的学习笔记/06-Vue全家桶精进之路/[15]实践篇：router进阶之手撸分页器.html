<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>[15] 实践篇：手撸分页器——路由状态管理 | 叶旭瑶</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.2e040761.css" as="style"><link rel="preload" href="/assets/js/app.a8df1c95.js" as="script"><link rel="preload" href="/assets/js/2.48d09664.js" as="script"><link rel="preload" href="/assets/js/73.8f72ade2.js" as="script"><link rel="prefetch" href="/assets/js/10.90ae3223.js"><link rel="prefetch" href="/assets/js/11.60747cf8.js"><link rel="prefetch" href="/assets/js/12.78613ebb.js"><link rel="prefetch" href="/assets/js/13.15cefad8.js"><link rel="prefetch" href="/assets/js/14.2706d9af.js"><link rel="prefetch" href="/assets/js/15.4a1534b3.js"><link rel="prefetch" href="/assets/js/16.667b9eec.js"><link rel="prefetch" href="/assets/js/17.2f6f2fb7.js"><link rel="prefetch" href="/assets/js/18.ae0db680.js"><link rel="prefetch" href="/assets/js/19.3a1a9b2b.js"><link rel="prefetch" href="/assets/js/20.b37fd568.js"><link rel="prefetch" href="/assets/js/21.00e571a2.js"><link rel="prefetch" href="/assets/js/22.7113929a.js"><link rel="prefetch" href="/assets/js/23.76749a7b.js"><link rel="prefetch" href="/assets/js/24.d64a7195.js"><link rel="prefetch" href="/assets/js/25.dd0efafa.js"><link rel="prefetch" href="/assets/js/26.b526a833.js"><link rel="prefetch" href="/assets/js/27.0d7e1a2b.js"><link rel="prefetch" href="/assets/js/28.ff5daa9c.js"><link rel="prefetch" href="/assets/js/29.6b832bc1.js"><link rel="prefetch" href="/assets/js/3.dc0eeb90.js"><link rel="prefetch" href="/assets/js/30.9473db5d.js"><link rel="prefetch" href="/assets/js/31.32df4c34.js"><link rel="prefetch" href="/assets/js/32.e34273e7.js"><link rel="prefetch" href="/assets/js/33.4d28e2f8.js"><link rel="prefetch" href="/assets/js/34.e19c3a87.js"><link rel="prefetch" href="/assets/js/35.ae6f54a4.js"><link rel="prefetch" href="/assets/js/36.c311869c.js"><link rel="prefetch" href="/assets/js/37.fe07ec53.js"><link rel="prefetch" href="/assets/js/38.b9b76405.js"><link rel="prefetch" href="/assets/js/39.ce5b3eb6.js"><link rel="prefetch" href="/assets/js/4.52766d3a.js"><link rel="prefetch" href="/assets/js/40.c28128a5.js"><link rel="prefetch" href="/assets/js/41.baa5b9df.js"><link rel="prefetch" href="/assets/js/42.e9dd8626.js"><link rel="prefetch" href="/assets/js/43.1870fb99.js"><link rel="prefetch" href="/assets/js/44.5f5cadd9.js"><link rel="prefetch" href="/assets/js/45.6e86d635.js"><link rel="prefetch" href="/assets/js/46.6f9e3d5c.js"><link rel="prefetch" href="/assets/js/47.da89bc26.js"><link rel="prefetch" href="/assets/js/48.29abeeb3.js"><link rel="prefetch" href="/assets/js/49.82a3a29d.js"><link rel="prefetch" href="/assets/js/5.9eccb937.js"><link rel="prefetch" href="/assets/js/50.b2028d20.js"><link rel="prefetch" href="/assets/js/51.9208c15a.js"><link rel="prefetch" href="/assets/js/52.db1c8ad3.js"><link rel="prefetch" href="/assets/js/53.2c6c7978.js"><link rel="prefetch" href="/assets/js/54.4a5fc56a.js"><link rel="prefetch" href="/assets/js/55.43d12619.js"><link rel="prefetch" href="/assets/js/56.f78e78dd.js"><link rel="prefetch" href="/assets/js/57.b92e209e.js"><link rel="prefetch" href="/assets/js/58.6b552921.js"><link rel="prefetch" href="/assets/js/59.90266c96.js"><link rel="prefetch" href="/assets/js/6.710abc21.js"><link rel="prefetch" href="/assets/js/60.fb66ef65.js"><link rel="prefetch" href="/assets/js/61.82cc26c2.js"><link rel="prefetch" href="/assets/js/62.a0a80205.js"><link rel="prefetch" href="/assets/js/63.dda7942d.js"><link rel="prefetch" href="/assets/js/64.0a5e6f5b.js"><link rel="prefetch" href="/assets/js/65.fb8144ce.js"><link rel="prefetch" href="/assets/js/66.8a1226d0.js"><link rel="prefetch" href="/assets/js/67.5b575b21.js"><link rel="prefetch" href="/assets/js/68.f3b6f395.js"><link rel="prefetch" href="/assets/js/69.2c6ce239.js"><link rel="prefetch" href="/assets/js/7.d448298b.js"><link rel="prefetch" href="/assets/js/70.142aeb69.js"><link rel="prefetch" href="/assets/js/71.a3a3c331.js"><link rel="prefetch" href="/assets/js/72.c2f1a26e.js"><link rel="prefetch" href="/assets/js/74.69faefcd.js"><link rel="prefetch" href="/assets/js/75.bf491959.js"><link rel="prefetch" href="/assets/js/76.54b30f01.js"><link rel="prefetch" href="/assets/js/77.9b2b976c.js"><link rel="prefetch" href="/assets/js/78.19096d31.js"><link rel="prefetch" href="/assets/js/79.ae5bc63c.js"><link rel="prefetch" href="/assets/js/8.04185565.js"><link rel="prefetch" href="/assets/js/9.30d66b6d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2e040761.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/hero.jpg" alt="叶旭瑶" class="logo"> <span class="site-name can-hide">叶旭瑶</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  导航栏
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/我的学习笔记/" class="nav-link">
  博客总览
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/01-Some前端理念/" class="nav-link">
  01-Some前端理念
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/02-CSS美学/" class="nav-link">
  02-CSS美学
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/03-JavaScript永动机/" class="nav-link">
  03-JavaScript永动机
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/04-蒂姆·伯纳斯·李Browser/" class="nav-link">
  04-蒂姆·伯纳斯·李Browser
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/05-Plugin成就/" class="nav-link">
  05-Plugin成就
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/06-Vue全家桶精进之路/" class="nav-link">
  06-Vue全家桶精进之路
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/07-计算机常识积累/" class="nav-link">
  07-计算机常识积累
</a></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  谷歌搜索
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  导航栏
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/我的学习笔记/" class="nav-link">
  博客总览
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/01-Some前端理念/" class="nav-link">
  01-Some前端理念
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/02-CSS美学/" class="nav-link">
  02-CSS美学
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/03-JavaScript永动机/" class="nav-link">
  03-JavaScript永动机
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/04-蒂姆·伯纳斯·李Browser/" class="nav-link">
  04-蒂姆·伯纳斯·李Browser
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/05-Plugin成就/" class="nav-link">
  05-Plugin成就
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/06-Vue全家桶精进之路/" class="nav-link">
  06-Vue全家桶精进之路
</a></li><li class="dropdown-item"><!----> <a href="/我的学习笔记/07-计算机常识积累/" class="nav-link">
  07-计算机常识积累
</a></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  谷歌搜索
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/我的学习笔记/01-Some前端理念" class="sidebar-heading clickable"><span>01-Some前端理念</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/我的学习笔记/02-CSS美学" class="sidebar-heading clickable"><span>02-CSS美学</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/我的学习笔记/03-JavaScript永动机" class="sidebar-heading clickable"><span>03-JavaScript永动机</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/我的学习笔记/04-蒂姆·伯纳斯·李Browser" class="sidebar-heading clickable"><span>04-蒂姆·伯纳斯·李Browser</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/我的学习笔记/05-Plugin成就" class="sidebar-heading clickable"><span>05-Plugin成就</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/我的学习笔记/06-Vue全家桶精进之路" class="sidebar-heading clickable open"><span>06-Vue全家桶精进之路</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[01]axios初识：axios代替ajax.html" class="sidebar-link">[01]axios初识：axios代替ajax</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[02]入门篇：vuejs文档基础摘要-更新中.html" class="sidebar-link">[02]入门篇：vuejs文档基础摘要-更新中</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[03]基础篇：Vue实例&amp;生命周期&amp;文本插值&amp;过滤器&amp;指令.html" class="sidebar-link">[03]基础篇：Vue实例&amp;生命周期&amp;文本插值&amp;过滤器&amp;指令</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[04]基础篇：计算属性与方法.html" class="sidebar-link">[04]基础篇：计算属性与方法</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[05]基础篇：v-bind&amp;class与style绑定.html" class="sidebar-link">[05]基础篇：v-bind&amp;class与style绑定</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[06]基础篇：内置指令与自定义指令.html" class="sidebar-link">[06]基础篇：内置指令与自定义指令</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[07]基础篇：表单与v-model.html" class="sidebar-link">[07]基础篇：表单与v-model</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[08]基础篇：组件与插槽.html" class="sidebar-link">[08]基础篇：组件与插槽</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[09]进阶篇：render函数的妙用.html" class="sidebar-link">[09]进阶篇：render函数的妙用</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[10]进阶篇：使用vue-cli脚手架工具搭建项目.html" class="sidebar-link">[10]进阶篇：使用vue-cli脚手架工具搭建项目</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[11]进阶篇：vue-router前端路由.html" class="sidebar-link">[11]进阶篇：vue-router前端路由</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[12]进阶篇：vuex状态管理.html" class="sidebar-link">[12]进阶篇：vuex状态管理</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[13]番外篇：多看官方文档.html" class="sidebar-link">[13]番外篇：多看官方文档</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[14]实践篇：vue的一些偷懒行为.html" class="sidebar-link">[14]实践篇：vue的一些偷懒行为</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html" class="active sidebar-link">[15]实践篇：router进阶之手撸分页器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#vue-router-路由导航-and-传递参数" class="sidebar-link">vue-router 路由导航 and 传递参数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#编程式的导航router-push" class="sidebar-link">编程式的导航router.push</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#参数-字符串" class="sidebar-link" style="padding-left:3rem;">参数：字符串</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#参数-对象-命名路由" class="sidebar-link" style="padding-left:3rem;">参数：对象（命名路由）</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#参数-对象-查询参数路由" class="sidebar-link" style="padding-left:3rem;">参数：对象（查询参数路由）</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#参数-表达式-动态路由" class="sidebar-link" style="padding-left:3rem;">参数：表达式（动态路由）</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#声明式的导航router-link" class="sidebar-link">声明式的导航router-link</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#参数-字符串-2" class="sidebar-link" style="padding-left:3rem;">参数：字符串</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#参数-对象-命名路由-2" class="sidebar-link" style="padding-left:3rem;">参数：对象（命名路由）</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#参数-对象-查询参数路由-2" class="sidebar-link" style="padding-left:3rem;">参数：对象（查询参数路由）</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#vue-router-视图管理" class="sidebar-link">vue-router 视图管理</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#重定向与别名-提升容错率" class="sidebar-link">重定向与别名(提升容错率)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#重定向-redirect" class="sidebar-link">重定向 redirect</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#别名-alias" class="sidebar-link">别名 alias</a></li></ul></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#跳转链接-路由导航" class="sidebar-link">跳转链接(路由导航)</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#vue-刷新-重载当前路由获取数据" class="sidebar-link">Vue 刷新/重载当前路由获取数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#方案一-利用路由的-quey-参数-使用-watch-进行检测-router-的变化实现监听" class="sidebar-link">方案一：利用路由的 quey 参数，使用 watch 进行检测 router 的变化实现监听</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#方案二-使用-vuex-向-store-提交数据方案" class="sidebar-link">方案二：使用 Vuex 向 store 提交数据方案</a></li></ul></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#路由守卫-navigation-guards" class="sidebar-link">路由守卫 navigation-guards</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#全局前置守卫-router-beforeeach" class="sidebar-link">全局前置守卫 router.beforeEach</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#全局解析守卫-router-beforeresolve" class="sidebar-link">全局解析守卫 router.beforeResolve</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#全局后置钩子-router-aftereach" class="sidebar-link">全局后置钩子 router.afterEach</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#路由独享守卫-beforeenter" class="sidebar-link">路由独享守卫 beforeEnter</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#组件内的守卫" class="sidebar-link">组件内的守卫</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#beforerouteenter-组件实例创建前" class="sidebar-link" style="padding-left:3rem;">beforeRouteEnter 组件实例创建前</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#beforerouteupdate-路由改变组件被复用时" class="sidebar-link" style="padding-left:3rem;">beforeRouteUpdate 路由改变组件被复用时</a></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#beforerouteleave-尚未保存突然离开前" class="sidebar-link" style="padding-left:3rem;">beforeRouteLeave 尚未保存突然离开前</a></li></ul></li><li class="sidebar-sub-header"><a href="/我的学习笔记/06-Vue全家桶精进之路/[15]实践篇：router进阶之手撸分页器.html#完整的导航解析流程" class="sidebar-link">完整的导航解析流程</a></li></ul></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[16]axios进阶：Cancellation实现在切换页面前取消请求.html" class="sidebar-link">[16]axios进阶：Cancellation实现在切换页面前取消请求</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[17]axios进阶：丰富功能与封装.html" class="sidebar-link">[17]axios进阶：丰富功能与封装</a></li><li><a href="/我的学习笔记/06-Vue全家桶精进之路/[18]实践篇：搭建项目流程初记录.html" class="sidebar-link">[18]实践篇：搭建项目流程初记录</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/我的学习笔记/07-计算机常识积累" class="sidebar-heading clickable"><span>07-计算机常识积累</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_15-实践篇-手撸分页器-路由状态管理"><a href="#_15-实践篇-手撸分页器-路由状态管理" class="header-anchor">#</a> [15] 实践篇：手撸分页器——路由状态管理</h1> <p><em>2021 年 1 月 30 日</em></p> <hr> <p></p><div class="table-of-contents"><ul><li><a href="#_15-实践篇-手撸分页器-路由状态管理">[15] 实践篇：手撸分页器——路由状态管理</a></li><li><a href="#路由状态管理-基础知识点整理">路由状态管理-基础知识点整理</a><ul><li><a href="#vue-router-路由导航-and-传递参数">vue-router 路由导航 and 传递参数</a><ul><li><a href="#编程式的导航-router-push">编程式的导航router.push</a><ul><li><a href="#参数-字符串">参数：字符串</a></li><li><a href="#参数-对象-命名路由">参数：对象（命名路由）</a></li><li><a href="#参数-对象-查询参数路由">参数：对象（查询参数路由）</a></li><li><a href="#参数-表达式-动态路由">参数：表达式（动态路由）</a></li></ul></li><li><a href="#声明式的导航-router-link">声明式的导航router-link</a><ul><li><a href="#参数-字符串">参数：字符串</a></li><li><a href="#参数-对象-命名路由">参数：对象（命名路由）</a></li><li><a href="#参数-对象-查询参数路由">参数：对象（查询参数路由）</a></li></ul></li><li><a href="#总结">总结</a></li></ul></li><li><a href="#vue-router-视图管理">vue-router 视图管理</a></li><li><a href="#重定向与别名-提升容错率">重定向与别名(提升容错率)</a><ul><li><a href="#重定向-redirect">重定向 redirect</a></li><li><a href="#别名-alias">别名 alias</a></li></ul></li><li><a href="#跳转链接-路由导航">跳转链接(路由导航)</a></li><li><a href="#vue-刷新-重载当前路由获取数据">Vue 刷新/重载当前路由获取数据</a><ul><li><a href="#方案一-利用路由的-quey-参数-使用-watch-进行检测-router-的变化实现监听">方案一：利用路由的 quey 参数，使用 watch 进行检测 router 的变化实现监听</a></li><li><a href="#方案二-使用-vuex-向-store-提交数据方案">方案二：使用 Vuex 向 store 提交数据方案</a></li></ul></li><li><a href="#路由守卫-navigation-guards">路由守卫 navigation-guards</a><ul><li><a href="#全局前置守卫-router-beforeeach">全局前置守卫 router.beforeEach</a></li><li><a href="#全局解析守卫-router-beforeresolve">全局解析守卫 router.beforeResolve</a></li><li><a href="#全局后置钩子-router-aftereach">全局后置钩子 router.afterEach</a></li><li><a href="#路由独享守卫-beforeenter">路由独享守卫 beforeEnter</a></li><li><a href="#组件内的守卫">组件内的守卫</a><ul><li><a href="#beforerouteenter-组件实例创建前">beforeRouteEnter 组件实例创建前</a></li><li><a href="#beforerouteupdate-路由改变组件被复用时">beforeRouteUpdate 路由改变组件被复用时</a></li><li><a href="#beforerouteleave-尚未保存突然离开前">beforeRouteLeave 尚未保存突然离开前</a></li></ul></li></ul></li><li><a href="#完整的导航解析流程">完整的导航解析流程</a></li></ul></li><li><a href="#手撸分页器记录-更新中">手撸分页器记录(更新中)</a></li><li><a href="#"></a></li></ul></div><p></p> <ul><li><a href="https://router.vuejs.org/zh/guide/" target="_blank" rel="noopener noreferrer">Vue Router 官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h1 id="路由状态管理-基础知识点整理"><a href="#路由状态管理-基础知识点整理" class="header-anchor">#</a> 路由状态管理-基础知识点整理</h1> <h2 id="vue-router-路由导航-and-传递参数"><a href="#vue-router-路由导航-and-传递参数" class="header-anchor">#</a> vue-router 路由导航 and 传递参数</h2> <h3 id="编程式的导航router-push"><a href="#编程式的导航router-push" class="header-anchor">#</a> 编程式的导航<code>router.push</code></h3> <ul><li>编程式导航传递参数有三种类型：字符串、对象、表达式。</li></ul> <h4 id="参数-字符串"><a href="#参数-字符串" class="header-anchor">#</a> 参数：字符串</h4> <ul><li>将路由地址以字符串的方式来跳转。</li> <li>优点：简单</li> <li>缺点：</li> <li><strong>不能传递参数</strong></li> <li>特别注意：使用命名路由传递参数，如果在<strong>目标页面刷新是会出错</strong>的</li> <li>示例：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// router.js</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
      main<span class="token operator">:</span> Home<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 组件中script</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="参数-对象-命名路由"><a href="#参数-对象-命名路由" class="header-anchor">#</a> 参数：对象（命名路由）</h4> <ul><li>前提:在注册路由的地方给路由命名 name</li> <li>传递参数使用 params</li> <li>目标页面接收参数时使用 params</li> <li>示例：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// router.js</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/new&quot;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;New&quot;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
      main<span class="token operator">:</span> New<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 跳转前页面组件中 触发跳转事件 + methods</span>
<span class="token comment">// 使用params传递参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;News&quot;</span><span class="token punctuation">,</span>
  params<span class="token operator">:</span> <span class="token punctuation">{</span> userId<span class="token operator">:</span> <span class="token number">1234567</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ this.$route.params.userId }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 跳转目标页面使用params接收参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="参数-对象-查询参数路由"><a href="#参数-对象-查询参数路由" class="header-anchor">#</a> 参数：对象（查询参数路由）</h4> <ul><li>查询参数：在路由地址后面带上参数</li> <li>传递参数使用 query，而且必须配合 path 来传递参数而不能用 name</li> <li>目标页面接收参数使用 query</li> <li>注意：和 name 配对的是 params，和 path 配对的是 query</li> <li>有点：查询参数搭配 query，<strong>刷新页面数据不会丢失</strong></li> <li>示例：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// router.js</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/new&quot;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;New&quot;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
      main<span class="token operator">:</span> New<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 跳转前页面组件中 触发跳转事件 + methods</span>
<span class="token comment">// 使用params传递参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">&quot;/new&quot;</span><span class="token punctuation">,</span>
  query<span class="token operator">:</span> <span class="token punctuation">{</span> userId<span class="token operator">:</span> <span class="token number">1234567</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ this.$route.query.userId }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 跳转目标页面使用params接收参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>userId<span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="参数-表达式-动态路由"><a href="#参数-表达式-动态路由" class="header-anchor">#</a> 参数：表达式（动态路由）</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 配置</span>
<span class="token comment">//路由配置文件router.js中 配置动态路由</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
     path<span class="token operator">:</span> <span class="token string">'/detail/:id'</span><span class="token punctuation">,</span>
     name<span class="token operator">:</span> <span class="token string">'Detail'</span><span class="token punctuation">,</span>
     component<span class="token operator">:</span> Detail
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 传递</span>
<span class="token comment">// 跳转前页面组件中 触发跳转事件 + methods</span>
<span class="token function-variable function">data</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span><span class="token number">1234567</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// methods方法中执行传递路由动态参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/detail/'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ this.$route.query.id }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 跳转目标页面使用params接收参数</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="声明式的导航router-link"><a href="#声明式的导航router-link" class="header-anchor">#</a> 声明式的导航<code>router-link</code></h3> <ul><li>使用<code>&lt;router-link&gt;</code>进行路由跳转</li> <li>使用<code>:to=&quot;字符串/对象&quot;</code>进行参数传递</li> <li>接收参数与编程式的导航<code>router.push</code>一样</li></ul> <h4 id="参数-字符串-2"><a href="#参数-字符串-2" class="header-anchor">#</a> 参数：字符串</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// router.js</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/news&quot;</span><span class="token punctuation">,</span>
    neme<span class="token operator">:</span> <span class="token string">&quot;news&quot;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
      main<span class="token operator">:</span> Home<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/news<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>click to news page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="参数-对象-命名路由-2"><a href="#参数-对象-命名路由-2" class="header-anchor">#</a> 参数：对象（命名路由）</h4> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span>
    <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{
      name: <span class="token punctuation">'</span>news<span class="token punctuation">'</span>,
      params: { userId: 1234567 },
    }<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>click to news page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span>
  <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="参数-对象-查询参数路由-2"><a href="#参数-对象-查询参数路由-2" class="header-anchor">#</a> 参数：对象（查询参数路由）</h4> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span>
    <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{
      path: <span class="token punctuation">'</span>/news<span class="token punctuation">'</span>,
      query: { userId: 1234567 },
    }<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>click to news page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span>
  <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <ul><li>动态路由和 query 属性传值，页面刷新参数不会丢失</li> <li>params 页面刷新参数会丢失</li> <li>动态路由一般用来传一个参数时居多(如详情页的 id)</li> <li>query、params 可以传递一个也可以传递多个参数</li></ul> <h2 id="vue-router-视图管理"><a href="#vue-router-视图管理" class="header-anchor">#</a> vue-router 视图管理</h2> <ul><li>page 文件夹--独立 page 页面文件夹(切换不同页面)--一个 page 底下不同的组件文件</li> <li>view 文件夹--独立的 view 视口文件</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> vueRouterPlay1 <span class="token keyword">from</span> <span class="token string">&quot;@/page/vueRouterPlay/vueRouterPlay.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> header1 <span class="token keyword">from</span> <span class="token string">&quot;@/page/vueRouterPlay/header.vue&quot;</span><span class="token punctuation">;</span>

routes<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/vueRouterPlay1&quot;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;vueRouterPlay1&quot;</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 注意这里是components 复数复数复数！</span>
      header<span class="token operator">:</span> header<span class="token punctuation">,</span> <span class="token comment">//设置header模板</span>
      main<span class="token operator">:</span> vueRouterPlay<span class="token punctuation">,</span> <span class="token comment">//设置main模板</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 命名视图的加载 --&gt;</span>
<span class="token comment">&lt;!-- header --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 内容区 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="重定向与别名-提升容错率"><a href="#重定向与别名-提升容错率" class="header-anchor">#</a> 重定向与别名(提升容错率)</h2> <ul><li>重定向与别名 提升了用户操作的容错率，两者的唯一区别就是，是否修改 url。</li> <li><a href="https://cn.vuejs.org/v2/guide/migration-vue-router.html#router-redirect-%E6%9B%BF%E6%8D%A2" target="_blank" rel="noopener noreferrer">Vue.js 官方文档——router 替换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://router.vuejs.org/zh/guide/essentials/redirect-and-alias.html#%E9%87%8D%E5%AE%9A%E5%90%91" target="_blank" rel="noopener noreferrer">Vue Router 官方文档——重定向与别名<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="重定向-redirect"><a href="#重定向-redirect" class="header-anchor">#</a> 重定向 redirect</h3> <ul><li>场景:希望用户在访问/index.htm,/index.html,/index 的时候展示的都是首页</li> <li>重定向的意思是：当用户访问 /a 时，URL 将会被替换成 /b，然后匹配路由为 /b</li> <li>常见案例：当你使用手机访问 taobao.com 时会被重定向到移动端 main.m.taobao.com 淘宝页面</li> <li>导航守卫并没有应用在跳转路由/a 上，而仅仅应用在其目标/b 上。也就是说，为/a 路由添加一个<strong>beforeEnter 守卫</strong>并不会有任何效果。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 方式一：字符串路径path</span>
    <span class="token comment">// 路径从 /a 重定向到 /b</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token string">'/b'</span> <span class="token punctuation">}</span>
    <span class="token comment">// 方式二：name</span>
    <span class="token comment">// 当用户输入a路径重定向到b命名路径</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'b'</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token comment">// 方式三：动态返回重定向目标</span>
    <span class="token comment">// 方法接收 目标路由 作为参数</span>
    <span class="token comment">// return 重定向的 字符串路径/路径对象</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> <span class="token function-variable function">redirect</span><span class="token operator">:</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;/&quot;</span><span class="token operator">+</span> to
    <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="别名-alias"><a href="#别名-alias" class="header-anchor">#</a> 别名 alias</h3> <ul><li>别名：/a 的别名是/b，当用户访问 /b 时，URL 会保持为 /b，但是路由匹配则为 /a，就像用户访问 /a 一样。</li> <li>功能：可以自由地将 UI 结构映射到任意的 URL，而不是受限于配置的嵌套路由结构。</li> <li>常见案例：用电脑和用手机访问 baidu.com 时，出来的页面是不一样的，电脑端有电脑端的页面，手机移动端有手机移动端的页面，但是 URL 地址一样都是 baidu.com。这个就可使用别名来实现。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&quot;/a&quot;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">,</span> alias<span class="token operator">:</span> <span class="token string">&quot;/b&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 需要多个别名都重定向到目标路劲/a，alias键值可为数组</span>
alias<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/manage&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/administer&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/administrate&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="跳转链接-路由导航"><a href="#跳转链接-路由导航" class="header-anchor">#</a> 跳转链接(路由导航)</h2> <ul><li>router 对象提供了三个 function 用于跳转链接。</li></ul> <table><thead><tr><th style="text-align:center;">声明式</th> <th style="text-align:center;">编程式</th> <th style="text-align:center;">功能</th></tr></thead> <tbody><tr><td style="text-align:center;">router.push(…)</td> <td style="text-align:center;"><code>&lt;router-link :to=&quot;…&quot;&gt;</code></td> <td style="text-align:center;">跳转到某个子页面，并在 history 中添加一条记录</td></tr> <tr><td style="text-align:center;">router.replace(…)</td> <td style="text-align:center;"><code>&lt;router-link :to=&quot;…&quot; replace&gt;</code></td> <td style="text-align:center;">替换当前的页面，可理解为跳转，和 push 的区别就是不会在 history 中添加记录</td></tr> <tr><td style="text-align:center;">router.go(number)</td> <td style="text-align:center;">-</td> <td style="text-align:center;">跳转到上一页 go(-1)，跳转到下一页 go(1)，实现跳转的前提是 history 中有记录。</td></tr></tbody></table> <h2 id="vue-刷新-重载当前路由获取数据"><a href="#vue-刷新-重载当前路由获取数据" class="header-anchor">#</a> Vue 刷新/重载当前路由获取数据</h2> <ul><li>刷新/重载时，通过 window.location.reload（）进行刷新处理</li></ul> <h3 id="方案一-利用路由的-quey-参数-使用-watch-进行检测-router-的变化实现监听"><a href="#方案一-利用路由的-quey-参数-使用-watch-进行检测-router-的变化实现监听" class="header-anchor">#</a> 方案一：利用路由的 quey 参数，使用 watch 进行检测 router 的变化实现监听</h3> <p>刷新/重载时，对路由进行传递特定参数，作为状态机修改状态</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 利用watch方法检测路由变化：</span>
watch<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">'$route'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 可以拿到目标参数 to.query.id 去再次请求数据接口</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 加载表格数据</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
　<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="方案二-使用-vuex-向-store-提交数据方案"><a href="#方案二-使用-vuex-向-store-提交数据方案" class="header-anchor">#</a> 方案二：使用 Vuex 向 store 提交数据方案</h3> <ul><li>在 store 中设置是否刷新的 state</li> <li>使用 computed 计算，刷新/重载时 commit store，监听 store 的流数据，判断状态，状态改变则重新请求数据。</li></ul> <h2 id="路由守卫-navigation-guards"><a href="#路由守卫-navigation-guards" class="header-anchor">#</a> 路由守卫 navigation-guards</h2> <ul><li><a href="https://cn.vuejs.org/v2/guide/migration-vue-router.html#router-beforeEach-changed" target="_blank" rel="noopener noreferrer">Vue.js 官方文档——router.beforeEach——changed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB" target="_blank" rel="noopener noreferrer">Vue Router 官方文档——导航守卫<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jianshu.com/p/7ff8f31afebe" target="_blank" rel="noopener noreferrer">Vue2.0 完整生命周期（包括路由守卫）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>功能：路由跳转前做一些验证，比如登录验证，是网站中的普遍需求。</li> <li>对此，vue-route 提供一些 router 的生命周期钩子，以实现导航守卫。</li> <li>参数或查询的改变并不会触发进入/离开的导航守卫。可以通过 watch 观察 $route 对象来应对这些变化，或使用 beforeRouteUpdate 的组件内守卫。</li></ul> <table><thead><tr><th style="text-align:center;">守卫名称</th> <th style="text-align:center;">API</th></tr></thead> <tbody><tr><td style="text-align:center;">全局前置守卫</td> <td style="text-align:center;">beforEach</td></tr> <tr><td style="text-align:center;">全局解析守卫</td> <td style="text-align:center;">beforeResolve</td></tr> <tr><td style="text-align:center;">全局后置钩子</td> <td style="text-align:center;">afterEach</td></tr> <tr><td style="text-align:center;">路由独享的守卫</td> <td style="text-align:center;">beforeEnter</td></tr> <tr><td style="text-align:center;">组件内的守卫</td> <td style="text-align:center;">beforeRouteEnter/beforeRouteUpdate/beforeRouteLeave</td></tr></tbody></table> <h3 id="全局前置守卫-router-beforeeach"><a href="#全局前置守卫-router-beforeeach" class="header-anchor">#</a> 全局前置守卫 router.beforeEach</h3> <ul><li><p>使用 router.beforeEach 注册一个全局前置守卫</p></li> <li><p>当一个导航触发时，全局前置守卫按照创建顺序调用。</p></li> <li><p>守卫是异步解析执行，此时导航在所有守卫 resolve 完之前一直处于 等待中。</p></li> <li><p>守卫方法接收三个参数：</p></li> <li><p><code>to: Route</code>即将要进入的目标路由对象</p></li> <li><p><code>from: Route</code>当前导航正要离开的路由</p></li> <li><p><code>next: Function</code>一定要调用该方法来 resolve 这个钩子。执行效果依赖 next 方法的调用参数。</p></li> <li><p><code>next()</code>参数：</p></li> <li><p><strong>不传参数</strong><code>next()</code>: 进行管道中的下一个钩子。如果全部钩子执行完了，则导航的状态就是 confirmed (确认的)。</p></li> <li><p><strong>传参 false</strong><code>next(false)</code>: 中断当前的导航。如果浏览器的 URL 改变了 (可能是用户手动或者浏览器后退按钮)，那么 URL 地址会重置到 from 路由对应的地址。</p></li> <li><p><strong>传参 path 路径</strong><code>next('/')</code> 或<code>next({ path: '/' })</code>: 跳转到指定地址。当前的导航被中断，然后进行一个新的导航。</p></li> <li><p>可向 next<strong>传递任意位置对象</strong>，且允许设置诸如 replace: true、name: 'home' 之类的选项以及任何用在 router-link 的 to prop 或 router.push 中的选项。</p></li> <li><p><strong>传入 Error 实例</strong><code>next(error)</code>: 导航会被终止且该错误会被传递给 router.onError() 注册过的回调。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 验证，未登录就跳转登陆页面</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">&quot;Login&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isAuthenticated<span class="token punctuation">)</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Login&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="全局解析守卫-router-beforeresolve"><a href="#全局解析守卫-router-beforeresolve" class="header-anchor">#</a> 全局解析守卫 router.beforeResolve</h3> <ul><li>在导航被确认之前，同时在所有组件内守卫和异步路由组件被解析之后，解析守卫就被调用。</li></ul> <h3 id="全局后置钩子-router-aftereach"><a href="#全局后置钩子-router-aftereach" class="header-anchor">#</a> 全局后置钩子 router.afterEach</h3> <ul><li>全局后置钩子与全局前置守卫类似，然而和守卫不同的是，这些钩子不会接受 next 函数也不会改变导航本身</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="路由独享守卫-beforeenter"><a href="#路由独享守卫-beforeenter" class="header-anchor">#</a> 路由独享守卫 beforeEnter</h3> <ul><li>使用方法与全局前置守卫相同,参数是一样的</li> <li>不同的是：全局守卫可以作用于全局，路由独享守卫只作用于被设置守卫的路由</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 登录模块</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;@/views/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function-variable function">beforeEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>needLogin <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            path<span class="token operator">:</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="组件内的守卫"><a href="#组件内的守卫" class="header-anchor">#</a> 组件内的守卫</h3> <ul><li>可以在路由组件内直接定义以下路由导航守卫：</li></ul> <h4 id="beforerouteenter-组件实例创建前"><a href="#beforerouteenter-组件实例创建前" class="header-anchor">#</a> beforeRouteEnter 组件实例创建前</h4> <ul><li>在渲染该组件的对应路由被 confirm 前调用</li> <li>不！能！获取组件实例 <code>this</code></li> <li>因为当守卫执行前，<strong>组件实例还没被创建</strong></li> <li>可以通过 next 获取 data 中的数据</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;Grayly&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">beforeRouteEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 通过 `vm` 访问组件实例</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span> <span class="token operator">+</span> vm<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="beforerouteupdate-路由改变组件被复用时"><a href="#beforerouteupdate-路由改变组件被复用时" class="header-anchor">#</a> beforeRouteUpdate 路由改变组件被复用时</h4> <ul><li>在<strong>当前路由改变，但是该组件被复用时</strong>调用</li> <li>举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，</li> <li>由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</li> <li>可以访问组件实例 <code>this</code></li> <li>该方法是 vue-router2.2 版本加上的。</li> <li>旧版本中，在<strong>两个子路由之间跳转，是不触发 beforeRouteLeave 的。这会导致某些重置操作没触发</strong>。</li> <li>在之前，都是用 watch 的监听路由变化。</li> <li>但是通过这个勾子，我们有了更好的方式。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">beforeRouteUpdate</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// just use `this`</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> to<span class="token punctuation">.</span>params<span class="token punctuation">.</span>name
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="beforerouteleave-尚未保存突然离开前"><a href="#beforerouteleave-尚未保存突然离开前" class="header-anchor">#</a> beforeRouteLeave 尚未保存突然离开前</h4> <ul><li>这个离开守卫通常用来<strong>禁止用户在还未保存修改前突然离开</strong>。</li> <li>该导航可以通过 next(false) 来取消。</li> <li>可以访问组件实例<code>this</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">beforeRouteLeave</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;你确定要离开吗&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token function">beforeRouteLeave</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> answer <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'改动未保存，你确定要离开吗'</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>answer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="完整的导航解析流程"><a href="#完整的导航解析流程" class="header-anchor">#</a> 完整的导航解析流程</h2> <ol><li>导航被触发。</li> <li>在失活的组件里调用 beforeRouteLeave 守卫。</li> <li>调用全局的 beforeEach 守卫。</li> <li>在重用的组件里调用 beforeRouteUpdate 守卫 (2.2+)。</li> <li>在路由配置里调用 beforeEnter。</li> <li>解析异步路由组件。</li> <li>在被激活的组件里调用 beforeRouteEnter。</li> <li>调用全局的 beforeResolve 守卫 (2.5+)。</li> <li>导航被确认。</li> <li>调用全局的 afterEach 钩子。</li> <li>触发 DOM 更新。</li> <li>调用 beforeRouteEnter 守卫中传给 next 的回调函数，创建好的组件实例会作为回调函数的参数传入。</li></ol> <h1 id="手撸分页器记录-更新中"><a href="#手撸分页器记录-更新中" class="header-anchor">#</a> 手撸分页器记录(更新中)</h1> <h1 id=""><a href="#" class="header-anchor">#</a></h1> <hr> <p><em>Copyright © 2020 - 2021 by 叶旭瑶 . All Rights Reserved .</em></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/我的学习笔记/06-Vue全家桶精进之路/[14]实践篇：vue的一些偷懒行为.html" class="prev">
        [14]实践篇：vue的一些偷懒行为
      </a></span> <span class="next"><a href="/我的学习笔记/06-Vue全家桶精进之路/[16]axios进阶：Cancellation实现在切换页面前取消请求.html">
        [16]axios进阶：Cancellation实现在切换页面前取消请求
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a8df1c95.js" defer></script><script src="/assets/js/2.48d09664.js" defer></script><script src="/assets/js/73.8f72ade2.js" defer></script>
  </body>
</html>
