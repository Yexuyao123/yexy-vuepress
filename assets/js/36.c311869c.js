(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{392:function(t,a,s){"use strict";s.r(a);var _=s(42),r=Object(_.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_02-输入-url-到页面加载显示完成的过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-输入-url-到页面加载显示完成的过程"}},[t._v("#")]),t._v(" [02] 输入 URL 到页面加载显示完成的过程")]),t._v(" "),s("p",[s("em",[t._v("2021 年 1 月 20 日")])]),t._v(" "),s("hr"),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#_02-输入-url-到页面加载显示完成的过程"}},[t._v("[02] 输入 URL 到页面加载显示完成的过程")])]),s("li",[s("a",{attrs:{href:"#输入-url-到页面加载显示完成的过程"}},[t._v("输入 URL 到页面加载显示完成的过程")]),s("ul",[s("li",[s("a",{attrs:{href:"#_1-输入-url"}},[t._v("1.输入 URL")])]),s("li",[s("a",{attrs:{href:"#_2-dns-解析获得-ip"}},[t._v("2.DNS 解析获得 IP")]),s("ul",[s("li",[s("a",{attrs:{href:"#域名解析过程"}},[t._v("域名解析过程")])])])]),s("li",[s("a",{attrs:{href:"#_3-tcp-三次握手"}},[t._v("3.TCP 三次握手，")])]),s("li",[s("a",{attrs:{href:"#_4-发送-http-请求"}},[t._v("4.发送 HTTP 请求")])]),s("li",[s("a",{attrs:{href:"#_5-响应-http-请求"}},[t._v("5.响应 http 请求")])]),s("li",[s("a",{attrs:{href:"#_6-浏览器下载响应"}},[t._v("6.浏览器下载响应")])]),s("li",[s("a",{attrs:{href:"#_7-页面加载"}},[t._v("7.页面加载")]),s("ul",[s("li",[s("a",{attrs:{href:"#重排与重绘的区别"}},[t._v("重排与重绘的区别")]),s("ul",[s("li",[s("a",{attrs:{href:"#重排-reflow"}},[t._v("重排(Reflow)")])]),s("li",[s("a",{attrs:{href:"#重绘-repaint"}},[t._v("重绘(Repaint)")])]),s("li",[s("a",{attrs:{href:"#引发重排"}},[t._v("引发重排")])]),s("li",[s("a",{attrs:{href:"#优化-减少重排"}},[t._v("优化（减少重排）")])])])])])]),s("li",[s("a",{attrs:{href:"#_8-连接结束"}},[t._v("8.连接结束")])])])]),s("li",[s("a",{attrs:{href:"#关于浏览器加载网页预加载流程"}},[t._v("关于浏览器加载网页预加载流程")])]),s("li",[s("a",{attrs:{href:"#"}})])])]),s("p"),t._v(" "),s("p",[t._v("著名前端面试题：\n一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？")]),t._v(" "),s("h1",{attrs:{id:"输入-url-到页面加载显示完成的过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输入-url-到页面加载显示完成的过程"}},[t._v("#")]),t._v(" 输入 URL 到页面加载显示完成的过程")]),t._v(" "),s("h2",{attrs:{id:"_1-输入-url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-输入-url"}},[t._v("#")]),t._v(" 1.输入 URL")]),t._v(" "),s("p",[t._v("统一资源标识符（Uniform Resource Identifier，URI)确定唯一互联网资源。分为以下两类:")]),t._v(" "),s("ul",[s("li",[t._v("统一资源定位符（Uniform Resource Locator，URL）确定唯一资源地址。")]),t._v(" "),s("li",[t._v("统一资源名称（Uniform Resource Name，URN）确定唯一资源名称。")])]),t._v(" "),s("h2",{attrs:{id:"_2-dns-解析获得-ip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-dns-解析获得-ip"}},[t._v("#")]),t._v(" 2.DNS 解析获得 IP")]),t._v(" "),s("p",[s("strong",[t._v("进行 DNS 域名解析 获得服务器的 IP 地址")])]),t._v(" "),s("ul",[s("li",[t._v("每台计算机的本机 IP 都是 127.0.0.1（即 localhost）")]),t._v(" "),s("li",[t._v("域名系统（Domain Name System，DNS），将域名和 IP 地址相互映射的一个分布式数据库。DNS 运行在 TCP 和 UDP 协议之上，是应用层协议，使用端口号 53。域名使用户更方便访问互联网，不用去记 IP 数串。")]),t._v(" "),s("li",[t._v("通过域名(主机名)，最终得到该主机名对应的 IP 地址的过程叫做域名解析（或主机名解析）。")])]),t._v(" "),s("h3",{attrs:{id:"域名解析过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#域名解析过程"}},[t._v("#")]),t._v(" 域名解析过程")]),t._v(" "),s("ol",[s("li",[t._v("检查自己本地的 hosts 文件")])]),t._v(" "),s("ul",[s("li",[t._v("在浏览器中输入域名，操作系统会先检查自己本地的 hosts 文件是否有这个网址映射关系，如果有就优先先调用这个 IP 地址映射，完成域名解析。")]),t._v(" "),s("li",[t._v("可以通过修改"),s("code",[t._v("/etc/hosts")]),t._v(" 文件人为配置 IP 和主机名。hosts 文件具有最高优先级。")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("查找本地 DNS 缓存")])]),t._v(" "),s("ul",[s("li",[t._v("浏览器缓存：浏览器会按照一定的频率缓存 DNS 记录。")]),t._v(" "),s("li",[t._v("操作系统缓存：如果浏览器缓存中找不到需要的 DNS 记录，那就去操作系统中找。")]),t._v(" "),s("li",[t._v("路由缓存：路由器也有 DNS 缓存。")])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("找 DNS 服务器")])]),t._v(" "),s("ul",[s("li",[t._v("DNS 服务器级别划分：\n"),s("ul",[s("li",[t._v("根 DNS 服务器：")]),t._v(" "),s("li",[t._v("顶级域 DNS 服务器（com）：")]),t._v(" "),s("li",[t._v("权威 DNS 服务器（server . com）：")]),t._v(" "),s("li",[t._v("本地域名服务器（查询代理和 DNS 查询结果缓存）: 只是一个查询代理")])])]),t._v(" "),s("li",[t._v("优先向本地 DNS 服务器查询：\n"),s("ul",[s("li",[t._v("DNS 服务器查询分为文件查询和缓存查询：\n"),s("ul",[s("li",[t._v("本地 DNS 服务器本地区域文件：此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性。")]),t._v(" "),s("li",[t._v("本地 DNS 服务器本地缓存：ISP DNS 缓存查找，从网络服务商（比如电信）的 DNS 缓存信息中查找。ISP 的 DNS 服务器：ISP 是互联网服务提供商(Internet Service Provider)的简称，ISP 有专门的 DNS 服务器应对 DNS 查询请求。此解析不具有权威性。")])])]),t._v(" "),s("li",[t._v("本地 DNS 服务器找不到的话，它就会向根服务器发出请求，进行递归查询。")])])]),t._v(" "),s("li",[t._v("次之，向根 DNS 服务器查询：\n"),s("ul",[s("li",[t._v("根据本地 DNS 服务器的设置（是否设置转发器）进行查询。\n"),s("ul",[s("li",[t._v("未用转发模式：本地 DNS 就把请求发至 13 台根 DNS，根 DNS 服务器收到请求后会判断这个域名(.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个 IP。")]),t._v(" "),s("li",[t._v("转发模式：此 DNS 服务器就会把请求转发至上一级 DNS 服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根 DNS 或把转请求转至上上级，以此循环。")])])])])]),t._v(" "),s("li",[t._v("不管是本地 DNS 服务器用是是转发，还是根提示，最后都是把结果返回给本地 DNS 服务器，由此 DNS 服务器再返回给客户机。")]),t._v(" "),s("li",[t._v("一旦该浏览器收到来自 DNS 的 IP 地址，就可以向该 IP 地址定位的 HTTP 服务器发起 TCP 连接")])]),t._v(" "),s("p",[t._v("部分参考："),s("a",{attrs:{href:"https://www.zhihu.com/question/23042131/answer/66571369",target:"_blank",rel:"noopener noreferrer"}},[t._v("知乎用户 wuxinliulei 对(DNS 解析的过程是什么，求详细的？)的回答"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_3-tcp-三次握手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-tcp-三次握手"}},[t._v("#")]),t._v(" 3.TCP 三次握手，")]),t._v(" "),s("p",[t._v("通信连接的建立需要经历以下三个过程：\n"),s("strong",[t._v("TCP 三次握手，建立 TCP 连接")])]),t._v(" "),s("ol",[s("li",[t._v("主机(客户端/浏览器) 向服务器发送一个建立连接的请求：您好，我可以连接你吗？")]),t._v(" "),s("li",[t._v("服务器接到请求后向客户端发送同意连接的信号：好的，你可以连接我！")]),t._v(" "),s("li",[t._v("客户端接到同意连接的信号后，再次向服务器发送了确认信号：那我连接咯！")])]),t._v(" "),s("p",[t._v("自此，主机与服务器两者建立了连接。\n三次握手的过程采用 TCP 协议，保证信息传输的可靠性。\n三次握手过程中，若一方收不到确认信号，协议会要求重新发送信号，确保双方都能发送和接收信号。")]),t._v(" "),s("p",[t._v("TCP 是有时间有效期的，")]),t._v(" "),s("h2",{attrs:{id:"_4-发送-http-请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-发送-http-请求"}},[t._v("#")]),t._v(" 4.发送 HTTP 请求")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("1 动词 路径协议/版本\n2 Key1: value1\n2 Key2: value2\n2 Key3: value3\n2 Content-Type: application/x-www-form-urlencoded\n2 Host: www.baidu.com\n2 User-Agent: curl/7.54.0\n3\n4 要上传的数据\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("实例")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("1 POST /path HTTP/1.1\n2 Host: passport.zhihu.com\n2 User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, likeGecko) Chrome/67.0.3396.99 Safari/537.36\n2 Accept: */*\n2 Content-Length: 24\n2 Content-Type: application/x-www-form-urlencoded\n3\n4 username=ff&password=123\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h2",{attrs:{id:"_5-响应-http-请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-响应-http-请求"}},[t._v("#")]),t._v(" 5.响应 http 请求")]),t._v(" "),s("p",[s("strong",[t._v("服务器响应 http 请求，返回文件（html、js、css、img 等）")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("1 协议/版本号 状态码状态 解释\n2 Key1: value1\n2 Key2: value2\n2 Content-Length: 17931\n2 Content-Type: text/html\n3\n4 要下载的内容\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("ol",[s("li",[t._v("状态码(服务器对浏览器说的话):")])]),t._v(" "),s("ul",[s("li",[t._v("1xx 不常用")]),t._v(" "),s("li",[t._v("2xx 表示成功")]),t._v(" "),s("li",[t._v("3xx 表示滚吧")]),t._v(" "),s("li",[t._v("4xx 客户端出错")]),t._v(" "),s("li",[t._v("5xx 服务器出错")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("第 4 部分：服务器返回给浏览器的文本信息，通常 HTML, CSS, JS, 图片等文件就放在这一部分。")])]),t._v(" "),s("h2",{attrs:{id:"_6-浏览器下载响应"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-浏览器下载响应"}},[t._v("#")]),t._v(" 6.浏览器下载响应")]),t._v(" "),s("p",[t._v("浏览器接收通过服务器后台处理后返回的字符串；并请求其他的资源。")]),t._v(" "),s("h2",{attrs:{id:"_7-页面加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-页面加载"}},[t._v("#")]),t._v(" 7.页面加载")]),t._v(" "),s("p",[s("strong",[t._v("浏览器构建生成 DOM 树，将 DOM 树可视化成渲染树，完成页面的显示。")])]),t._v(" "),s("p",[t._v("进行 html 页面加载、解析、渲染的工作。")]),t._v(" "),s("ol",[s("li",[t._v("加载\n浏览器对一个 html 页面的加载顺序是从上而下的，并在加载过程并行进行解析渲染处理。在这个过程中遇到 link 标签、image 标签、script 标签时，浏览器会再次向服务器发送请求获取 css 文件、图片资源、js 文件，并执行 js 代码，同步进行加载解析。")]),t._v(" "),s("li",[t._v("解析、渲染\n解析的过程，其实就是生成解析树，即 dom 树。dom 树是由 dom 元素及属性节点组成，加上 css 解析的样式对象和 js 解析后的动作实现。而渲染，就是将 DOM 树进行可视化表示。下一步就来到了绘制网页的工作阶段。")]),t._v(" "),s("li",[t._v("绘制页面\n浏览器通过上面步骤计算得到渲染树，是 DOM 树的可视化表示，构建渲染树使页面以正确的顺序绘制出来，遵循一定的渲染规则，经过一系列的渲染工作，实现网站页面的绘制，由此最终完成了页面展示。")])]),t._v(" "),s("h3",{attrs:{id:"重排与重绘的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重排与重绘的区别"}},[t._v("#")]),t._v(" 重排与重绘的区别")]),t._v(" "),s("p",[t._v("重绘不一定需要重排（比如颜色的改变），重排必然导致重绘（比如改变网页元素的位置）")]),t._v(" "),s("h4",{attrs:{id:"重排-reflow"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重排-reflow"}},[t._v("#")]),t._v(" 重排(Reflow)")]),t._v(" "),s("ul",[s("li",[t._v("当渲染树的一部分必须更新并且节点的尺寸发生了变化，浏览器会使渲染树中受到影响的部分失效，并重新构造渲染树。")]),t._v(" "),s("li",[t._v("DOM 的变化影响了元素的几何属性，浏览器需要重新计算元素的几何属性，同时其他元素的几何属性和位置也会受到影响，浏览器会使渲染树中受到影响的部分失效，并重新构造渲染树，这个过程是重排。")])]),t._v(" "),s("h4",{attrs:{id:"重绘-repaint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重绘-repaint"}},[t._v("#")]),t._v(" 重绘(Repaint)")]),t._v(" "),s("p",[t._v("在一个元素的外观被改变所触发的浏览器行为，浏览器会根据元素的新属性重新绘制，使元素呈现新的外观。比如改变某个元素的背景色、文字颜色、边框颜色等等。\n浏览器会重新绘制受到影响的部分到屏幕，这个过程叫重绘。")]),t._v(" "),s("h4",{attrs:{id:"引发重排"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引发重排"}},[t._v("#")]),t._v(" 引发重排")]),t._v(" "),s("ol",[s("li",[t._v("添加、删除可见的 dom")]),t._v(" "),s("li",[t._v("元素的位置改变")]),t._v(" "),s("li",[t._v("元素的尺寸改变(外边距、内边距、边框厚度、宽高、等几何属性)")]),t._v(" "),s("li",[t._v("页面渲染初始化")]),t._v(" "),s("li",[t._v("浏览器窗口尺寸改变")]),t._v(" "),s("li",[t._v("获取某些属性。当获取一些属性时，浏览器为取得正确的值也会触发重排,它会导致队列刷新，这些属性包括：offsetTop、offsetLeft、 offsetWidth、offsetHeight、scrollTop、scrollLeft、scrollWidth、scrollHeight、clientTop、clientLeft、clientWidth、clientHeight、getComputedStyle() (currentStyle in IE)。所以，在多次使用这些值时应进行缓存。")])]),t._v(" "),s("h4",{attrs:{id:"优化-减少重排"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优化-减少重排"}},[t._v("#")]),t._v(" 优化（减少重排）")]),t._v(" "),s("h5",{attrs:{id:"浏览器自身优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器自身优化"}},[t._v("#")]),t._v(" 浏览器自身优化")]),t._v(" "),s("p",[t._v("浏览器会把所有会引起重排、重绘的操作放入到 1 个队列中，等队列中的操作到一定数量或一定时间间隔，浏览器就会 flush 队列，进行一批处理。\n这样多次重排、重绘变成一次重排重绘。")]),t._v(" "),s("h5",{attrs:{id:"人为减少重绘重排"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#人为减少重绘重排"}},[t._v("#")]),t._v(" 人为减少重绘重排")]),t._v(" "),s("ol",[s("li",[t._v("修改 DOM 的样式————换成————先定义好 css 的 class，然后修改 DOM 的 className。")]),t._v(" "),s("li",[t._v("不要把 DOM 结点的属性值放在一个循环里当成循环里的变量。")]),t._v(" "),s("li",[t._v("HTML 动画元素先设定好位置(fixed 或 absoult 的 position)，再修改他们的 CSS 就不会重排的。")]),t._v(" "),s("li",[t._v("千万不要使用 table 布局。一个小改动会造成整个 table 的重新布局。")]),t._v(" "),s("li",[t._v("不要在布局信息改变的时候做查询（会导致渲染队列强制刷新）")])]),t._v(" "),s("p",[t._v("总结：减少 DOM 操作，div 能改内容就改内容 ，减少移除重新插入。")]),t._v(" "),s("h2",{attrs:{id:"_8-连接结束"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-连接结束"}},[t._v("#")]),t._v(" 8.连接结束")]),t._v(" "),s("ul",[s("li",[t._v("主机向服务器发送一个断开连接的请求（不早了，我该走了）；")]),t._v(" "),s("li",[t._v("服务器接到请求后发送确认收到请求的信号（知道了）；")]),t._v(" "),s("li",[t._v("服务器向主机发送断开通知（我也该走了）；")]),t._v(" "),s("li",[t._v("主机接到断开通知后断开连接并反馈一个确认信号（嗯，好的），服务器收到确认信号后断开连接。")])]),t._v(" "),s("h1",{attrs:{id:"关于浏览器加载网页预加载流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关于浏览器加载网页预加载流程"}},[t._v("#")]),t._v(" 关于浏览器加载网页预加载流程")]),t._v(" "),s("ul",[s("li",[t._v("见"),s("RouterLink",{attrs:{to:"/我的学习笔记/01-Some前端理念/[03]前端性能优化.html#浏览器是如何加载网页"}},[t._v("[03]前端性能优化")])],1)]),t._v(" "),s("h1",{attrs:{id:""}},[s("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("em",[t._v("Copyright © 2020 - 2021 by 叶旭瑶 . All Rights Reserved .")])])])}),[],!1,null,null,null);a.default=r.exports}}]);